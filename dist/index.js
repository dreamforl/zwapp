!function(e,t){e&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(self.document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).zwapp=t()}(this,(function(){"use strict";function e(e,t,...n){let i=`zwapp expression Error: ${e}${t?"\n\nexpression:"+t:""}`,s=[];throw n.forEach((e=>{e instanceof HTMLElement?(s.push("\n\nError-Element"),s.push(e)):i+="\n\n"+e})),console.warn(i,...s),new Error(i)}function t(t,n){try{return new Function(`return ${t}`)(t)}catch(i){e(i.message,t,n)}}function n(t,n={},i={},s){try{return new Function(["namespace",...Object.keys(i)],`let result;with(namespace){result = ${t}  } return result `)(n,...Object.values(i))}catch(n){e(n.message,t,s)}}function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}class s{#e;constructor(){this.#e={}}change(e,t){this.#e[e]instanceof Array&&this.#e[e].forEach((e=>{e(t)}))}add(e,t){this.#e[e]instanceof Array?this.#e[e].push(t):this.#e[e]=[t]}}const o=/^z-(on|bind|show|if|model|text|for)/;const r=/^z-(on|bind|show|if|model|text|for)/;function c(n){document.querySelectorAll("[z-data]").forEach(((o,r)=>{let c,l=o.getAttribute("z-data");l=l.replace(/\s/g,""),c=/\(.*?\)/.test(l)?t(l,o):t(l+"()",o);let d=function(t){let n=i(t);"object"!==n&&e("初始化函数应该返回一个对象，当前返回的是"+n);let{data:s,methods:o,watch:r,created:c,mounted:a,computed:l}=t,d={this:{$refs:{}},watch:{},computed:{},ifId:0};if(s){"function"!==i(s)&&e("data需要是一个函数，返回一个对象");let t=s(),n=i(t);"object"!==n&&e("data需要是一个函数，返回一个对象.当前返回的是:"+n),d.data=t,Object.entries(t).forEach((e=>{d.this[e[0]]=e[1]}))}if(o){"object"!==i(o)&&e("methods需要是一个对象，内部的变量都是函数"),d.methods=o;let t=Object.keys(d.this);Object.entries(o).forEach((n=>{t.includes(n[0])&&e("methods中与data出现了重名字段:"+n[0]);let s=i(n[1]);"function"!==s&&e(`methods中的只能包含函数,而${n[0]}是:${s}`),d.this[n[0]]=n[1]}))}if(c){let t=i(c);"function"!==t&&e("created需要是一个函数，当前的是："+t),d.created=c}if(r&&("object"!==i(r)&&e("watch需要是一个对象，内部的变量都是函数"),Object.entries(r).forEach((t=>{"function"!==i(t[1])&&e("watch内部需要是函数"),d.watch[t[0]]=t[1]}))),a){let t=i(c);"function"!==t&&e("mounted需要是一个函数，返回的是一个："+t),d.mounted=a}if(l){let t,n;!d.data||(t=Object.keys(d.data)),!d.methods||(n=Object.keys(d.methods));let s=i(l);"object"!==s&&e("computed需要是一个对象，内部的变量都是函数,当前的是："+s),Object.entries(l).forEach((s=>{let o=i(s[1]);"function"!==o&&e("computed内部需要是函数,当前的是："+o),/return/.test(s[1].toString())||e("computed内部的函数需要有返回值"),t.includes(s[0])&&e("computed中的方法名，与data中不能一样,:"+s[0]),n.includes(s[0])&&e("computed中的方法名，与methods中不能一样,:"+s[0]),d.computed[s[0]]=s[1].bind(d.this),d.this[s[0]]=d.computed[s[0]]()}))}return delete d.data,delete d.methods,d}(c);d.name=`zw-component-${r}`,o.$depend=new s,d.this.$el=o;let u=new Proxy(d.this,{set:(e,t,n)=>(o.$depend.change(t,n),Reflect.set(e,t,n))});!function(e,t){let n=e.querySelectorAll("[ref]");console.log(n);for(let e=0;e<n.length;e++){let i=n[e].getAttribute("ref");t.this.$refs[i]?warn("重复ref"+n[e],t.this.$refs[i]):t.this.$refs[i]=n[e]}}(o,d),d.this=u,console.log(d),o.setAttribute(d.name,""),n.set(d.name,u),a(d,o)}))}function a(e,t){if(!t)return;!function(e,t){t.setAttribute(e.name,""),function(e,t){for(let n=0;n<t.attributes.length;n++){let{name:i,value:s}=t.attributes[n];i=i.replace(/\s{2,}/g," "),s=s.replace(/\s{2,}/g," "),"@"===i[0]&&(i=i.replace(/^@/,"z-on")),":"===i[0]&&(i=i.replace(":","z-bind")),/^z-on:/.test(i)&&(i=i.replace("z-on:","z-on")),/^z-bind:/.test(i)&&(i=i.replace("z-bind:","z-bind")),l.test(i)&&d(i,s,t,e)}}(e,t)}(e,t);let n=t.children.length;if(n>0)for(let i=0;i<n;i++)a(e,t.children[i])}const l=/^z-(on|bind|show|if|model|text|for)/;function d(e,t,i,s){if(/z-on/.test(e))return function(e,t,i,s){e=e.replace(r,"");let o=t.split("(")[0];i.addEventListener(e,(e=>{n(o===t?t+"()":t,s.this,{$event:e},i)}))}(e,t,i,s);if(/z-bind/.test(e))return function(e,t,n,i){e=e.replace(o,"");let s=i.this[t];i.this.$el.$depend.add(t,(e=>{n.setAttribute(t,s)})),n.setAttribute(t,s)}(e,t,i,s);switch(e=e.match(l)[1]){case"show":return function(e,t,n,i){let s=i.this.$el.$depend,o=i.this[t];s.add(t,(e=>{e?n.style.removeProperty("display"):n.style.display="none"})),o?n.style.removeProperty("display"):n.style.display="none"}(0,t,i,s);case"if":return function(e,t,n,i){let s=i.this.$el.$depend,o=i.this[t];s.add(t,(e=>{e?n.style.removeProperty("display"):n.style.display="none"})),o?n.style.removeProperty("display"):n.style.display="none"}(0,t,i,s);case"model":return function(e,t,n,i){n instanceof HTMLInputElement?(n.value=i.this[t],i.this.$el.$depend.add(t,(e=>{n.value=e})),n.addEventListener("input",(e=>{i.this[t]=e.target.value}))):warn("z-model需要绑定在input元素上",n)}(0,t,i,s);case"text":return function(e,t,n,i){let s=i.this.$el.$depend;n.innerText=i.this[t],s.add(t,(e=>{n.innerText=e}))}(0,t,i,s);case"for":return function(e,t,n,i){let s=(t=t.replace(/\s{2,}/g," ").trim()).split(" ");if(3!==s.length||"in"!=s[1])return warn('z-for中请使用正确的语法 类似于 z-for="item in list"',n);if(!(i[s[2]]instanceof Array))return warn("z-for要循环的是数组，请传递数组",n);let o=document.createElement("div"),r=n.innerHTML;i.list.forEach(((e,t)=>{o.innerHTML+=r})),n.innerHTML=o.innerHTML}(0,t,i,s)}}const u={version:"1.0.0",async init(){await new Promise((e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})),this.namespace=new Map,c(this.namespace)}};return u.init(),u}));

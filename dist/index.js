function e(e){document.querySelectorAll("[z-data]").forEach(((n,a)=>{let r,s=n.getAttribute("z-data");s=s.replace(/\s/g,""),r=/\(.*?\)/.test(s)?fastEval(s,n):fastEval(s+"()",n),n.$depend=new depend,r.$refs={};let o=new Proxy(r,{set:(e,t,a)=>(n.$depend.change(t,a),Reflect.set(e,t,a))});o._name?o._name:o._name="zw-namespace"+a,o.$el=n,n.setAttribute(o._name,""),e.set(o._name,o),t(o,n)}))}function t(e,r){if(!r)return;!function(e,t){t.setAttribute(e._name,""),setRefs(t,e),function(e,t){for(let r=0;r<t.attributes.length;r++){let{name:s,value:o}=t.attributes[r];s=s.replace(/\s{2,}/g," "),o=o.replace(/\s{2,}/g," "),"@"===s[0]&&(s=s.replace(/^@/,"z-on")),":"===s[0]&&(s=s.replace(":","z-bind")),/^z-on:/.test(s)&&(s=s.replace("z-on:","z-on")),/^z-bind:/.test(s)&&(s=s.replace("z-bind:","z-bind")),n.test(s)&&a(s,o,t,e)}}(e,t)}(e,r);let s=r.children.length;if(s>0)for(let n=0;n<s;n++)t(e,r.children[n])}const n=/^z-(on|bind|show|if|model|text|for)/;function a(e,t,a,r){if(/z-on/.test(e))return set_z_on(e,t,a,r);if(/z-bind/.test(e))return set_z_bind(e,t,a,r);switch(e=e.match(n)[1]){case"show":return set_z_show(e,t,a,r);case"if":return set_z_if(e,t,a,r);case"model":return set_z_model(e,t,a,r);case"text":return set_z_text(e,t,a,r);case"for":return set_z_for(e,t,a,r)}}window.onload=function(){e(new Map)};const r={version:"1.0.0",async init(){await new Promise((e=>{"loading"===document.readyState?(console.log("jiazai"),document.addEventListener("DOMContentLoaded",e)):e()}))}};export{r as zwapp};
